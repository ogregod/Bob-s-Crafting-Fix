<form class="tool-config-form">
    <p class="notes">Drag and drop tools from your compendium to configure them for use in recipes.</p>

    <div class="tools-list">
        {{#each tools}}
        <div class="tool-item flexrow" style="margin-bottom: 10px; align-items: center; gap: 10px;">
            <div class="tool-item-drop" data-index="{{@index}}"
                 style="flex: 1; min-width: 200px; padding: 8px; border: 2px dashed #999; background: rgba(0,0,0,0.1); border-radius: 4px; cursor: pointer;">
                <i class="fas fa-hammer" style="margin-right: 5px;"></i>
                <input type="text" name="tools.{{@index}}.name" value="{{this.name}}"
                       placeholder="Drop tool here or type name"
                       style="border: none; background: transparent; width: calc(100% - 30px);" />
            </div>

            <label style="flex: 0 0 auto;">Ability:</label>
            <select name="tools.{{@index}}.ability" style="flex: 0 0 auto; width: 100px;">
                {{#each ../abilities}}
                    <option value="{{@key}}" {{#if (eq @key ../../this.ability)}}selected{{/if}}>
                        {{localize this.label}}
                    </option>
                {{/each}}
            </select>

            <button type="button" class="delete-tool" data-index="{{@index}}"
                    style="flex: 0 0 auto; color: #ff4444;">
                <i class="fas fa-trash"></i>
            </button>
        </div>
        {{else}}
        <p style="text-align: center; font-style: italic; color: #666;">No tools configured. Click "Add Tool" to get started.</p>
        {{/each}}
    </div>

    <div class="form-group" style="margin-top: 15px;">
        <button type="button" class="add-tool" style="width: 100%;">
            <i class="fas fa-plus"></i> Add Tool
        </button>
    </div>

    <div class="form-group" style="margin-top: 20px; text-align: right;">
        <button type="submit" style="margin-right: 5px;">
            <i class="fas fa-save"></i> Save Configuration
        </button>
        <button type="button" onclick="this.closest('.app').querySelector('.close').click();">
            <i class="fas fa-times"></i> Cancel
        </button>
    </div>
</form>

<style>
.tool-item-drop:hover {
    border-color: #4CAF50;
    background: rgba(76, 175, 80, 0.1);
}

.tool-item-drop.dragover {
    border-color: #2196F3;
    background: rgba(33, 150, 243, 0.2);
}
</style>
